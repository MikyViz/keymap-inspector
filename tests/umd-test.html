<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç UMD –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 50px; }
        .result { background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        pre { background: #e9ecef; padding: 10px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç UMD Build</h1>
    
    <div id="results"></div>

    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º UMD –≤–µ—Ä—Å–∏—é -->
    <script src="../dist/keymap-inspector.umd.js"></script>
    
    <script>
        function runTest() {
            const resultsDiv = document.getElementById('results');
            let html = '';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç
            html += '<h2>–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ KeymapInspector:</h2>';
            html += `<div class="result">window.KeymapInspector: ${typeof window.KeymapInspector}</div>`;
            html += `<div class="result">KeymapInspector: ${typeof KeymapInspector}</div>`;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤–æ–π—Å—Ç–≤–∞
            if (typeof KeymapInspector === 'object') {
                html += '<h3>–°–≤–æ–π—Å—Ç–≤–∞ KeymapInspector:</h3>';
                html += `<pre>${Object.keys(KeymapInspector).join(', ')}</pre>`;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞—Å–∫–ª–∞–¥–∫–∏
                const layouts = ['en', 'ru', 'de', 'fr', 'es', 'ua', 'he', 'KeymapInspector'];
                layouts.forEach(prop => {
                    const exists = KeymapInspector[prop] !== undefined;
                    const type = typeof KeymapInspector[prop];
                    html += `<div class="result ${exists ? 'success' : 'error'}">
                        ${exists ? '‚úÖ' : '‚ùå'} KeymapInspector.${prop}: ${type}
                    </div>`;
                    
                    if (exists && type === 'object' && prop !== 'KeymapInspector') {
                        const count = Object.keys(KeymapInspector[prop] || {}).length;
                        html += `<div class="result">   ‚îî‚îÄ ${count} —Å–∏–º–≤–æ–ª–æ–≤</div>`;
                    }
                });
                
                // –ü—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å inspector
                try {
                    let inspector;
                    if (KeymapInspector.KeymapInspector) {
                        inspector = new KeymapInspector.KeymapInspector({
                            en: KeymapInspector.en,
                            ru: KeymapInspector.ru
                        });
                    } else if (typeof KeymapInspector === 'function') {
                        inspector = new KeymapInspector({
                            en: KeymapInspector.en,
                            ru: KeymapInspector.ru
                        });
                    }
                    
                    if (inspector) {
                        html += '<h3>‚úÖ Inspector —Å–æ–∑–¥–∞–Ω!</h3>';
                        
                        // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–∏–º–≤–æ–ª—ã
                        const testChar = 'a';
                        const result = inspector.inspect(testChar);
                        if (result) {
                            html += `<div class="result success">‚úÖ –¢–µ—Å—Ç '${testChar}': ${result.keyDefinition.code}</div>`;
                            html += `<pre>${JSON.stringify(result.layouts, null, 2)}</pre>`;
                        } else {
                            html += `<div class="result error">‚ùå –¢–µ—Å—Ç '${testChar}': –Ω–µ –Ω–∞–π–¥–µ–Ω</div>`;
                        }
                    } else {
                        html += '<div class="result error">‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å inspector</div>';
                    }
                    
                } catch (error) {
                    html += `<div class="result error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
                }
            }
            
            resultsDiv.innerHTML = html;
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        runTest();
    </script>
</body>
</html>

